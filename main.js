!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var o=n(9);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(t){o(e,t,n[t])})}return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},function(e,t,n){var o=n(10),s=n(0);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var o=n(11);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},function(e,t,n){(e.exports=n(8)(!1)).push([e.i,".post-selector-selected-list {\n  margin: 0;\n  background: #f5f5f5;\n  padding: 0 15px; }\n  .post-selector-selected-list__item {\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: justify;\n        justify-content: space-between;\n    -ms-flex-wrap: nowrap;\n        flex-wrap: nowrap;\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #e2e4e7; }\n    .post-selector-selected-list__item:first-child {\n      padding-top: 10px; }\n    .post-selector-selected-list__item:last-child {\n      border-bottom: 0; }\n\n.selected-post {\n  position: relative;\n  width: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between; }\n  .selected-post__post, .selected-post__button {\n    -ms-flex-item-align: center;\n        -ms-grid-row-align: center;\n        align-self: center; }\n  .selected-post__post {\n    max-width: 60%;\n    font-weight: bold; }\n\n.post-selector-button {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  padding: 8px 2px;\n  text-align: center; }\n\n.post-selector-search {\n  position: relative;\n  background: #f5f5f5;\n  padding: 10px 15px 15px 15px; }\n  .post-selector-search__label {\n    display: block;\n    margin-bottom: 5px;\n    font-weight: bold; }\n  .post-selector-search__input {\n    width: 100%; }\n  .post-selector-search .components-spinner {\n    position: absolute;\n    top: 35px;\n    right: 10px; }\n\n.post-selector-suggestions .editor-url-input__suggestions {\n  padding: 0; }\n  .post-selector-suggestions .editor-url-input__suggestions .editor-url-input__suggestion:last-child {\n    border-bottom: 0; }\n\n.post-selector-suggestions .editor-url-input__suggestion {\n  display: block;\n  padding: 8px;\n  border-bottom: 1px solid #e2e4e7; }\n\n.suggested-item {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  margin: 0 -5px; }\n  .suggested-item__title, .suggested-item__type {\n    padding: 0 5px;\n    -ms-flex-item-align: center;\n        -ms-grid-row-align: center;\n        align-self: center; }\n  .suggested-item__title {\n    width: 100%; }\n  .suggested-item__type {\n    font-weight: bold;\n    font-size: 12px; }\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var s=(r=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(i).concat([s]).join("\n")}var r;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},s=0;s<this.length;s++){var i=this[s][0];null!=i&&(o[i]=!0)}for(s=0;s<e.length;s++){var r=e[s];null!=r[0]&&o[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function(e){return n(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(t)}e.exports=o},function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n},function(e,t,n){"use strict";n.r(t);n(7);var o=n(1),s=n.n(o),i=n(2),r=n.n(i),a=n(3),c=n.n(a),l=n(4),u=n.n(l),p=n(5),d=n.n(p),f=n(6),g=n.n(f),m=n(0),b=n.n(m),y=wp.element,h=y.Component,v=y.Fragment,_=wp.htmlEntities.decodeEntities,x=wp.keycodes,w=x.UP,S=x.DOWN,k=x.ENTER,R=wp.components,j=R.Spinner,E=R.Popover,N=R.IconButton,O=wp.compose.withInstanceId,P=wp.apiFetch,C=wp.url.addQueryArgs,L=wp.i18n.__,T=function(e){return e.stopPropagation()};var D=O(function(e){function t(){var e;return r()(this,t),(e=u()(this,d()(t).apply(this,arguments))).onChange=e.onChange.bind(b()(b()(e))),e.onKeyDown=e.onKeyDown.bind(b()(b()(e))),e.bindListNode=e.bindListNode.bind(b()(b()(e))),e.updateSuggestions=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){for(var o=this,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];clearTimeout(t),t=setTimeout(function(){e.apply(o,i)},n)}}(e.updateSuggestions.bind(b()(b()(e))),200),e.suggestionNodes=[],e.state={posts:[],showSuggestions:!1,selectedSuggestion:null,input:""},e}return g()(t,e),c()(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){delete this.suggestionsRequest}},{key:"bindListNode",value:function(e){this.listNode=e}},{key:"bindSuggestionNode",value:function(e){var t=this;return function(n){t.suggestionNodes[e]=n}}},{key:"updateSuggestions",value:function(e){var t=this;if(2>e.length||/^https?:/.test(e))this.setState({showSuggestions:!1,selectedSuggestion:null,loading:!1});else{this.setState({showSuggestions:!0,selectedSuggestion:null,loading:!0});var n=P({path:C("/wp/v2/search",{search:e,per_page:20,subtype:this.props.postType?this.props.postType:"any"})});n.then(function(e){t.suggestionsRequest===n&&e.map(function(n){P({path:"/wp/v2/types/".concat(n.subtype)}).then(function(o){n.typeLabel=o.name,t.setState({posts:e,loading:!1})})})}).catch(function(){t.suggestionsRequest===n&&t.setState({loading:!1})}),this.suggestionsRequest=n}}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({input:t}),this.updateSuggestions(t)}},{key:"onKeyDown",value:function(e){var t=this.state,n=t.showSuggestions,o=t.selectedSuggestion,s=t.posts,i=t.loading;if(n&&s.length&&!i)switch(e.keyCode){case w:e.stopPropagation(),e.preventDefault();var r=o?o-1:s.length-1;this.setState({selectedSuggestion:r});break;case S:e.stopPropagation(),e.preventDefault();var a=null===o||o===s.length-1?0:o+1;this.setState({selectedSuggestion:a});break;case k:if(null!==this.state.selectedSuggestion){e.stopPropagation();var c=this.state.posts[this.state.selectedSuggestion];this.selectLink(c)}}}},{key:"selectLink",value:function(e){var t=this;P({path:"/wp/v2/types/".concat(e.subtype)}).then(function(n){var o=n.rest_base;P({path:"/wp/v2/".concat(o,"/").concat(e.id,"?_embed&")}).then(function(e){var n;n=1>e.featured_media||!e.featured_media?s()({},e,{featuredImage:!1}):s()({},e,{featuredImage:e._embedded["wp:featuredmedia"][0].media_details.sizes||!1}),t.props.onPostSelect(n)}),t.setState({input:"",selectedSuggestion:null,showSuggestions:!1}),t.props.setPostType(t.props.postType)})}},{key:"renderSelectedPosts",value:function(){var e=this;return React.createElement("ul",{className:"post-selector-selected-list"},this.props.posts.map(function(t,n){return React.createElement("li",{className:"post-selector-selected-list__item",key:t.id},React.createElement("div",{className:"selected-post"},React.createElement("span",{className:"selected-post__post"},t.title.rendered," ",React.createElement("strong",null,t.typeLabel)),React.createElement("span",{className:"selected-post__button"},0!==n?React.createElement(N,{className:"post-selector-button",icon:"arrow-up-alt2",onClick:function(){e.props.posts.splice(n-1,0,e.props.posts.splice(n,1)[0]),e.props.onChange(e.props.posts),e.setState({state:e.state})}}):null,e.props.posts.length-1!==n?React.createElement(N,{className:"post-selector-button",icon:"arrow-down-alt2",onClick:function(){e.props.posts.splice(n+1,0,e.props.posts.splice(n,1)[0]),e.props.onChange(e.props.posts),e.setState({state:e.state})}}):null,React.createElement(N,{className:"post-selector-button",icon:"no",onClick:function(){e.props.posts.splice(n,1),e.props.onChange(e.props.posts),e.setState({state:e.state})}}))))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoFocus,o=void 0===n||n,s=t.instanceId,i=this.state,r=i.showSuggestions,a=i.posts,c=i.selectedSuggestion,l=i.loading,u=i.input;return React.createElement(v,null,this.renderSelectedPosts(),React.createElement("div",{className:"post-selector-search"},React.createElement("label",{htmlFor:"post-selector-search",className:"post-selector-search__label"},L("Zoeken","clarkson-theme")),React.createElement("input",{id:"post-selector-search",className:"post-selector-search__input",autoFocus:o,type:"search","aria-label":"URL",required:!0,value:u,onChange:this.onChange,onInput:T,placeholder:L("Typ om te zoeken","clarkson-theme"),onKeyDown:this.onKeyDown,role:"combobox","aria-expanded":r,"aria-autocomplete":"list","aria-owns":"editor-url-input-suggestions-".concat(s),"aria-activedescendant":null!==c?"editor-url-input-suggestion-".concat(s,"-").concat(c):void 0}),l&&React.createElement(j,null)),r&&!!a.length&&React.createElement(E,{position:"bottom",noArrow:!0,focusOnMount:!1},React.createElement("div",{className:"post-selector-suggestions"},React.createElement("div",{className:"editor-url-input__suggestions",id:"editor-url-input-suggestions-".concat(s),ref:this.bindListNode,role:"listbox"},a.map(function(t,n){return React.createElement("button",{key:t.id,role:"option",tabIndex:"-1",id:"editor-url-input-suggestion-".concat(s,"-").concat(n),ref:e.bindSuggestionNode(n),className:"editor-url-input__suggestion ".concat(n===c?"is-selected":""),onClick:function(){return e.selectLink(t)},"aria-selected":n===c},React.createElement("div",{className:"suggested-item"},React.createElement("span",{className:"suggested-item__title"},_(t.title)||"(no title)"),React.createElement("span",{className:"suggested-item__type"},"(",_(t.typeLabel),")")))})))))}}]),t}(h));t.default=D}]);